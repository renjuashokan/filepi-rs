@page "/"
@page "/FileBrowser"
@page "/files"
@page "/syncfusion-browser"
@page "/syncfusion-browser/{currentPath?}"
@using FilePiWeb.Interfaces
@inject IFileService FileService
@inject NavigationManager Navigation

<PageTitle>Syncfusion File Manager - FilePi</PageTitle>

@layout FilePiWeb.Layout.EmptyLayout

<SfFileManager TValue="FileManagerDirectoryContent" Height="100%" Width="100%">
    <FileManagerAjaxSettings Url="/api/v1/syncfusion/fileoperations"
                             DownloadUrl="/api/v1/syncfusion/download"
                             UploadUrl="/api/v1/syncfusion/upload"
                             GetImageUrl="/api/v1/syncfusion/getimage">
    </FileManagerAjaxSettings>
    <FileManagerEvents TValue="FileManagerDirectoryContent" ></FileManagerEvents>
    <FileManagerNavigationPaneSettings Visible="true" />
</SfFileManager>

@code {
	[Parameter] public string? CurrentPath { get; set; }

	private List<ToolBarItemModel> ToolbarItems = new List<ToolBarItemModel>()
	{
        //new ToolBarItemModel() { Name = "Back", TooltipText = "Go Back", PrefixIcon = "e-icons e-arrow-left" },
        new ToolBarItemModel() { Name = "NewFolder" },
		new ToolBarItemModel() { Name = "Upload" },
		new ToolBarItemModel() { Name = "Delete" },
		new ToolBarItemModel() { Name = "Download" },
		new ToolBarItemModel() { Name = "Rename" },
		new ToolBarItemModel() { Name = "SortBy" },
		new ToolBarItemModel() { Name = "Refresh" },
		new ToolBarItemModel() { Name = "Selection" },
		new ToolBarItemModel() { Name = "View" },
		new ToolBarItemModel() { Name = "Details" },
	};

	private string[] FileMenuItems = new string[] { "Open", "|", "Delete", "Download", "Rename", "|", "Details" };
	private string[] FolderMenuItems = new string[] { "Open", "|", "Delete", "Rename", "Download", "|", "Details" };
	private string[] LayoutMenuItems = new string[] { "SortBy", "View", "Refresh", "|", "NewFolder", "Upload", "|", "Details", "|", "SelectAll" };

    public void ToolbarClick(ToolbarClickEventArgs<FileManagerDirectoryContent> args)
    {
        if (args.Item.Name == "Back")
        {
            Navigation.NavigateTo("/");
        }
    }
}
